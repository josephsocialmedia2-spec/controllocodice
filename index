<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Giornalino Immobili (PDF gratuito)</title>

  <style>
    /* PDF/Print */
    @page { size: A4; margin: 12mm; }
    @media print {
      .toolbar { display: none !important; }
      a { color: inherit; text-decoration: none; }
    }

    body { font-family: Arial, sans-serif; color: #111; margin: 0; background: #fff; }
    .wrap { padding: 18px; }

    .toolbar {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      background: white;
      padding: 12px 18px;
      border-bottom: 1px solid #eee;
      z-index: 10;
    }
    .toolbar .left { display: flex; gap: 10px; align-items: baseline; }
    .toolbar .badge { font-size: 12px; opacity: .7; }

    .btn {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px 12px;
      background: #fff;
      cursor: pointer;
      font-weight: 700;
    }

    .cover { page-break-after: always; padding: 18px 0 8px; }
    .cover h1 { margin: 0 0 6px; font-size: 28px; }
    .cover p { margin: 0; font-size: 14px; opacity: .8; }

    .section-title {
      page-break-before: always;
      margin: 0 0 10px;
      padding: 8px 0;
      font-size: 18px;
      border-bottom: 1px solid #ddd;
    }

    /* PIÙ IMMOBILI PER PAGINA: cambia 3 -> 4 se vuoi ancora più compatto */
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .card {
      border: 1px solid #e6e6e6;
      border-radius: 12px;
      overflow: hidden;
      break-inside: avoid;
    }

    .img {
      width: 100%;
      aspect-ratio: 4 / 3;
      object-fit: cover;
      display: block;
      background: #f3f3f3;
    }

    .meta { padding: 10px; }
    .title { font-size: 13px; font-weight: 800; margin: 0 0 6px; line-height: 1.2; }
    .price { font-size: 13px; margin: 0 0 6px; }
    .facts { font-size: 11px; opacity: .85; display: flex; gap: 6px; flex-wrap: wrap; }
    .facts span { border: 1px solid #eee; padding: 2px 6px; border-radius: 999px; }
    .link { font-size: 11px; margin-top: 8px; }
    .link a { border-bottom: 1px dotted #999; color: inherit; text-decoration: none; }
  </style>
</head>

<body>
  <div class="toolbar">
    <div class="left">
      <strong>Giornalino Immobili</strong>
      <span class="badge" id="info">—</span>
    </div>
    <button class="btn" onclick="window.print()">Scarica PDF</button>
  </div>

  <div class="wrap">
    <div class="cover">
      <h1>La Sacra Immobiliare</h1>
      <p>Catalogo immobili – PDF gratuito + stampabile</p>
      <p style="margin-top:6px; font-size:12px; opacity:.7">
        Suggerimento: in stampa togli “Intestazioni e piè di pagina” e usa margini minimi.
      </p>
    </div>

    <h2 class="section-title">IMMOBILI DISPONIBILI (ELENCO UNICO ORDINATO)</h2>
    <div id="catalogo" class="grid"></div>

    <div style="page-break-before: always; padding-top: 18px;">
      <h2 style="margin:0 0 8px; font-size:18px;">Contatti</h2>
      <p style="margin:0; font-size:13px; opacity:.85;">
        Telefono / WhatsApp: ________ • Email: ________ • Sito: lasacraimmobiliare.it
      </p>
    </div>
  </div>

  <script>
    /**
     * ✅ QUI METTI I TUOI IMMOBILI.
     * Ordinamento attuale:
     * 1) Vendesi prima
     * 2) Affittasi dopo
     * 3) prezzo crescente (priceValue)
     *
     * Se vuoi prezzo decrescente: cambia "a.priceValue - b.priceValue" in "b.priceValue - a.priceValue"
     */
    const items = [
      {
        type: "Vendesi",
        title: "Bilocale in centro",
        priceLabel: "€ 145.000",
        priceValue: 145000,
        area: "65 mq",
        rooms: "2 locali",
        location: "Torino",
        image: "https://via.placeholder.com/800x600",
        url: "https://lasacraimmobiliare.it/products/..."
      },
      {
        type: "Affittasi",
        title: "Monolocale arredato",
        priceLabel: "€ 600/mese",
        priceValue: 600,
        area: "35 mq",
        rooms: "1 locale",
        location: "Torino",
        image: "https://via.placeholder.com/800x600",
        url: "https://lasacraimmobiliare.it/products/..."
      },
      {
        type: "Vendesi",
        title: "Trilocale ristrutturato",
        priceLabel: "€ 210.000",
        priceValue: 210000,
        area: "90 mq",
        rooms: "3 locali",
        location: "Torino",
        image: "https://via.placeholder.com/800x600",
        url: "https://lasacraimmobiliare.it/products/..."
      }
    ];

    // Ordinamento: Vendesi -> Affittasi, poi prezzo crescente
    items.sort((a, b) => {
      if (a.type !== b.type) return a.type === "Vendesi" ? -1 : 1;
      return (a.priceValue ?? 0) - (b.priceValue ?? 0);
    });

    function esc(s) {
      return String(s ?? "")
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    function cardHTML(x) {
      return `
        <article class="card">
          <img class="img" src="${esc(x.image)}" alt="">
          <div class="meta">
            <p class="title">${esc(x.title)}</p>
            <p class="price">${esc(x.priceLabel)}</p>
            <div class="facts">
              <span>${esc(x.type)}</span>
              ${x.area ? `<span>${esc(x.area)}</span>` : ""}
              ${x.rooms ? `<span>${esc(x.rooms)}</span>` : ""}
              ${x.location ? `<span>${esc(x.location)}</span>` : ""}
            </div>
            <div class="link"><a href="${esc(x.url)}">Scheda immobile</a></div>
          </div>
        </article>
      `;
    }

    const grid = document.getElementById("catalogo");
    grid.innerHTML = items.map(cardHTML).join("");

    // info in alto
    const info = document.getElementById("info");
    info.textContent = `${items.length} immobili • ordine: Vendesi → Affittasi, prezzo crescente`;
  </script>
</body>
</html>
